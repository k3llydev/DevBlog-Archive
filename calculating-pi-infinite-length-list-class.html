<p>I recently faced a coding challenge where the result had to be a List class that could handle infinite-length lists. As part of the solution, the List class had to have a <code>PI()</code> method that should return a calculation of&nbsp;&#960;. Long story short, I decided to handle infinity with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*" title="null" target="_blank">generator functions</a> and used this same concept to implement the <code>PI()</code> method generator.</p><p>Here is an overview of the involved methods to calculate&nbsp;&#960;:</p><code class="hljs language-javascript">%3Cspan%20class=%22hljs-keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22hljs-title%20class_%22%3EList%3C/span%3E%20%7B%0A%0A%20%20%20%3Cspan%20class=%22hljs-title%20function_%22%3Econstructor%3C/span%3E(%3Cspan%20class=%22hljs-params%22%3Egenerator,%20min%20=%20%3Cspan%20class=%22hljs-number%22%3E0%3C/span%3E,%20max%20=%20%3Cspan%20class=%22hljs-literal%22%3EInfinity%3C/span%3E%3C/span%3E)%20%7B%20%3Cspan%20class=%22hljs-comment%22%3E/*%20...%20*/%3C/span%3E%7D%0A%0A%20%20%20%3Cspan%20class=%22hljs-comment%22%3E//%20Implementation%20of%20other%20list%20methods...%3C/span%3E%0A%0A%20%20%20%3Cspan%20class=%22hljs-title%20function_%22%3Eget%3C/span%3E(%3Cspan%20class=%22hljs-params%22%3En%3C/span%3E)%20%7B%20%3Cspan%20class=%22hljs-comment%22%3E/*%20Obtains%20a%20value%20based%20on%20the%20number%20provided%20*/%3C/span%3E%20%7D%0A%0A%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22hljs-title%20function_%22%3Earctan%3C/span%3E(%3Cspan%20class=%22hljs-params%22%3Ex%3C/span%3E)%20%7B%20%3Cspan%20class=%22hljs-comment%22%3E/*%20Generator%20for%20Arctan%20series%20*/%3C/span%3E%20%7D%0A%0A%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22hljs-keyword%22%3Eget%3C/span%3E%20%3Cspan%20class=%22hljs-title%20function_%22%3EPI%3C/span%3E()%20%7B%20%3Cspan%20class=%22hljs-comment%22%3E/*%20Generator%20for%20PI%20calculation%20*/%3C/span%3E%20%7D%0A%0A%7D</code><p>This is an overview of how the implementation was built, we can appreciate:</p><ol><li>The <code>constructor</code> method is the one receiving the generator function and storing it for later use.</li><li>The <code>arctan</code> method receives a parameter named <code>x</code> that we will get in detail later on.</li><li>The <code>PI</code> method is of type <code>get</code>, which means we can directly invoke it and reference its values based on the generator function.</li></ol><p>Moving forward, we are going to quickly analyze a few steps before the construction of the <code>arctan(x)</code> method.</p><h2 id="arctan-trigonometry">Arctan (trigonometry)</h2><p>The formula I used to build the <code>arctan(x)</code> method refers to this concept of <code>inverse trigonometry functions</code> being <a href="https://www.cuemath.com/trigonometry/arctan/" title="null" target="_blank">arctan</a> one of the most important ones. Since arctan has many different uses, I had to focus only on those used for calculating&nbsp;&#960;. For now, keep in mind the following formula:</p><code class="hljs language-javascript">%3Cspan%20class=%22hljs-keyword%22%3Econst%3C/span%3E%20%3Cspan%20class=%22hljs-variable%20constant_%22%3EPI%3C/span%3E%20=%20%3Cspan%20class=%22hljs-number%22%3E4%3C/span%3E%20*%20(%20%3Cspan%20class=%22hljs-title%20function_%22%3Earctan%3C/span%3E(%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E/%3Cspan%20class=%22hljs-number%22%3E2%3C/span%3E)%20+%20%3Cspan%20class=%22hljs-title%20function_%22%3Earctan%3C/span%3E(%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E/%3Cspan%20class=%22hljs-number%22%3E3%3C/span%3E)%20);</code><p>This is a <a href="https://en.wikipedia.org/wiki/Machin-like_formula" title="null" target="_blank">Machin-like formula</a> to calculate the approximate value of&nbsp;&#960;, more specifically it is <a href="https://example.com" title="null" target="_blank">Euler&#39;s solution</a> that implements the Taylor series, a representation of the following infinite sum:</p><p><img src="/DevBlog-Archive-resources/arctan_formula_taylor_series.jpg" alt="Arctan function with Taylor series"></p><p>Or if we translate it to code:</p><code class="hljs language-javascript">%3Cspan%20class=%22hljs-number%22%3E0%3C/span%3E%20+%20x%5E%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E/%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E%20-%20x%5E%3Cspan%20class=%22hljs-number%22%3E3%3C/span%3E/%3Cspan%20class=%22hljs-number%22%3E3%3C/span%3E%20+%20x%5E%3Cspan%20class=%22hljs-number%22%3E5%3C/span%3E/%3Cspan%20class=%22hljs-number%22%3E5%3C/span%3E%20-%20x%5E%3Cspan%20class=%22hljs-number%22%3E7%3C/span%3E/%3Cspan%20class=%22hljs-number%22%3E7%3C/span%3E%20+%20...%3Cspan%20class=%22hljs-title%20class_%22%3EContinues%3C/span%3E%20infinitely</code><p>So, here is the implementation of the <code>arctan(x)</code> method I ended up with:</p><code class="hljs language-javascript">%3Cspan%20class=%22hljs-keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22hljs-title%20function_%22%3Earctan%3C/span%3E(%3Cspan%20class=%22hljs-params%22%3Ex%3C/span%3E)%20%7B%0A%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Efunction%3C/span%3E*%20%3Cspan%20class=%22hljs-title%20function_%22%3Egenerator%3C/span%3E(%3Cspan%20class=%22hljs-params%22%3E%3C/span%3E)%20%7B%0A%20%20%20%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Elet%3C/span%3E%20sum%20=%20%3Cspan%20class=%22hljs-number%22%3E0%3C/span%3E;%0A%20%20%20%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Efor%3C/span%3E(%3Cspan%20class=%22hljs-keyword%22%3Elet%3C/span%3E%20i%20=%20%3Cspan%20class=%22hljs-number%22%3E0%3C/span%3E;%20%3Cspan%20class=%22hljs-literal%22%3Etrue%3C/span%3E;%20i++)%20%7B%0A%20%20%20%20%20%20%20%20%20sum%20+=%20(%3Cspan%20class=%22hljs-title%20class_%22%3EMath%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Epow%3C/span%3E(-%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E,%20i)%20*%20%3Cspan%20class=%22hljs-title%20class_%22%3EMath%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Epow%3C/span%3E(x,%20%3Cspan%20class=%22hljs-number%22%3E2%3C/span%3E%20*%20i%20+%20%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E))%20/%20(%3Cspan%20class=%22hljs-number%22%3E2%3C/span%3E%20*%20i);%0A%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Eyield%3C/span%3E%20sum;%0A%20%20%20%20%20%20%7D%0A%20%20%20%7D%0A%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22hljs-keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22hljs-title%20class_%22%3EList%3C/span%3E(generator);%0A%7D</code><p>For a better understanding, I will explain the formula in two parts:</p><ol><li>Controlling the current sign.</li><li>Implementation of the Taylor series formula.</li></ol><h3 id="controlling-the-current-sign">Controlling the current sign</h3><p>Since I decided to have a variable that works as a counter (<code>i</code>) I was able to determine the current operation sign between <code>+</code> and <code>-</code> with the following code:</p><code class="hljs language-javascript">%3Cspan%20class=%22hljs-title%20class_%22%3EMath%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Epow%3C/span%3E(-%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E,%20i)%0A%0A%3Cspan%20class=%22hljs-comment%22%3E//%20Examples%3C/span%3E%0A%3Cspan%20class=%22hljs-variable%20language_%22%3Econsole%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Elog%3C/span%3E(%3Cspan%20class=%22hljs-title%20class_%22%3EMath%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Epow%3C/span%3E(-%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E,%20%3Cspan%20class=%22hljs-number%22%3E0%3C/span%3E));%20%3Cspan%20class=%22hljs-comment%22%3E//%20%201%3C/span%3E%0A%3Cspan%20class=%22hljs-variable%20language_%22%3Econsole%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Elog%3C/span%3E(%3Cspan%20class=%22hljs-title%20class_%22%3EMath%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Epow%3C/span%3E(-%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E,%20%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E));%20%3Cspan%20class=%22hljs-comment%22%3E//%20-1%3C/span%3E%0A%3Cspan%20class=%22hljs-variable%20language_%22%3Econsole%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Elog%3C/span%3E(%3Cspan%20class=%22hljs-title%20class_%22%3EMath%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Epow%3C/span%3E(-%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E,%20%3Cspan%20class=%22hljs-number%22%3E2%3C/span%3E));%20%3Cspan%20class=%22hljs-comment%22%3E//%20%201%3C/span%3E%0A%3Cspan%20class=%22hljs-variable%20language_%22%3Econsole%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Elog%3C/span%3E(%3Cspan%20class=%22hljs-title%20class_%22%3EMath%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Epow%3C/span%3E(-%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E,%20%3Cspan%20class=%22hljs-number%22%3E3%3C/span%3E));%20%3Cspan%20class=%22hljs-comment%22%3E//%20-1%3C/span%3E</code><p>And since the formula uses the inline sum operator <code>+=</code> it automatically determines the sign that should be used in the current iteration.</p><h3 id="implementation-of-the-taylor-series-formula">Implementation of the Taylor series formula</h3><p>The representation of the <code>x^1/1</code> in code is the following fragment of code:</p><code class="hljs language-javascript">%3Cspan%20class=%22hljs-title%20class_%22%3EMath%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Epow%3C/span%3E(x,%20%3Cspan%20class=%22hljs-number%22%3E2%3C/span%3E%20*%20i%20+%20%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E)%20/%20(%3Cspan%20class=%22hljs-number%22%3E2%3C/span%3E%20*%20i);</code><p>And since it is a sum of all those elements, the result is always being saved to the <code>sum</code> variable:</p><code class="hljs language-javascript">sum%20+=%20(%3Cspan%20class=%22hljs-title%20class_%22%3EMath%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Epow%3C/span%3E(-%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E,%20i)%20*%20%3Cspan%20class=%22hljs-title%20class_%22%3EMath%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Epow%3C/span%3E(x,%20%3Cspan%20class=%22hljs-number%22%3E2%3C/span%3E%20*%20i%20+%20%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E))%20/%20(%3Cspan%20class=%22hljs-number%22%3E2%3C/span%3E%20*%20i);</code><h2 id="implementing-pi-method">Implementing PI() method</h2><p>With the previous formula already working, implementing the <code>PI()</code> method was simpler because, as mentioned previously, I used Euler&#39;s solution to calculate&nbsp;&#960;. (The formula I suggested to keep in mind)</p><code class="hljs language-javascript">%3Cspan%20class=%22hljs-keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22hljs-keyword%22%3Eget%3C/span%3E%20%3Cspan%20class=%22hljs-title%20function_%22%3EPI%3C/span%3E()%20%7B%0A%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Efunction%3C/span%3E*%20%3Cspan%20class=%22hljs-title%20function_%22%3Egenerator%3C/span%3E(%3Cspan%20class=%22hljs-params%22%3E%3C/span%3E)%20%7B%0A%20%20%20%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Elet%3C/span%3E%20counter%20=%20%3Cspan%20class=%22hljs-number%22%3E0%3C/span%3E;%0A%20%20%20%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Elet%3C/span%3E%20pi%20=%20%3Cspan%20class=%22hljs-number%22%3E0%3C/span%3E;%0A%20%20%20%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Eyield%3C/span%3E%20pi;%0A%20%20%20%20%20%20%3Cspan%20class=%22hljs-comment%22%3E//%20This%20formula:%3C/span%3E%0A%20%20%20%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Econst%3C/span%3E%20%5B%20arc1_2,%20arc1_3%20%5D%20=%20%5B%20%3Cspan%20class=%22hljs-title%20class_%22%3EList%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Earctan%3C/span%3E(%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E%20/%20%3Cspan%20class=%22hljs-number%22%3E2%3C/span%3E),%20%3Cspan%20class=%22hljs-title%20class_%22%3EList%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Earctan%3C/span%3E(%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E%20/%20%3Cspan%20class=%22hljs-number%22%3E3%3C/span%3E)%20%5D;%0A%20%20%20%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Ewhile%3C/span%3E(%3Cspan%20class=%22hljs-literal%22%3Etrue%3C/span%3E)%20%7B%0A%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22hljs-comment%22%3E//%20PI%20=%204%20*%20(%20arctan(1/2)%20+%20arctan(1/3)%20)%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22hljs-comment%22%3E//%20Getting%20the%20length%20based%20on%20current%20iteration%20of%20PI%3C/span%3E%0A%20%20%20%20%20%20%20%20%20pi%20=%20%3Cspan%20class=%22hljs-number%22%3E4%3C/span%3E%20*%20(arc1_2.%3Cspan%20class=%22hljs-title%20function_%22%3Eget%3C/span%3E(counter)%20+%20arc1_3.%3Cspan%20class=%22hljs-title%20function_%22%3Eget%3C/span%3E(counter));%0A%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Eyield%3C/span%3E%20pi;%0A%20%20%20%20%20%20%20%20%20counter++;%0A%20%20%20%20%20%20%7D%0A%20%20%20%7D%0A%20%20%20%3Cspan%20class=%22hljs-keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22hljs-keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22hljs-title%20class_%22%3EList%3C/span%3E(generator);%0A%7D</code><h2 id="finally-calculating-Ï€">Finally calculating &#960;</h2><p>This was the hardest part because test cases were also approximation assertions. But as far as the entire List class implementation was done it can be used as:</p><code class="hljs language-javascript">%3Cspan%20class=%22hljs-variable%20language_%22%3Econsole%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Elog%3C/span%3E(%3Cspan%20class=%22hljs-title%20class_%22%3EList%3C/span%3E.%3Cspan%20class=%22hljs-property%22%3EPI%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Eget%3C/span%3E(%3Cspan%20class=%22hljs-number%22%3E1%3C/span%3E));%20%20%20%3Cspan%20class=%22hljs-comment%22%3E//%203.333333333333333%3C/span%3E%0A%3Cspan%20class=%22hljs-variable%20language_%22%3Econsole%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Elog%3C/span%3E(%3Cspan%20class=%22hljs-title%20class_%22%3EList%3C/span%3E.%3Cspan%20class=%22hljs-property%22%3EPI%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Eget%3C/span%3E(%3Cspan%20class=%22hljs-number%22%3E5%3C/span%3E));%20%20%20%3Cspan%20class=%22hljs-comment%22%3E//%203.1417411974336886%3C/span%3E%0A%3Cspan%20class=%22hljs-variable%20language_%22%3Econsole%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Elog%3C/span%3E(%3Cspan%20class=%22hljs-title%20class_%22%3EList%3C/span%3E.%3Cspan%20class=%22hljs-property%22%3EPI%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Eget%3C/span%3E(%3Cspan%20class=%22hljs-number%22%3E12%3C/span%3E));%20%20%3Cspan%20class=%22hljs-comment%22%3E//%203.1415926497167876%3C/span%3E%0A%3Cspan%20class=%22hljs-variable%20language_%22%3Econsole%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Elog%3C/span%3E(%3Cspan%20class=%22hljs-title%20class_%22%3EList%3C/span%3E.%3Cspan%20class=%22hljs-property%22%3EPI%3C/span%3E.%3Cspan%20class=%22hljs-title%20function_%22%3Eget%3C/span%3E(%3Cspan%20class=%22hljs-number%22%3E100%3C/span%3E));%20%3Cspan%20class=%22hljs-comment%22%3E//%203.1415926535897922%3C/span%3E</code><p>The higher the <code>x</code> value, the more precise the result will be.</p>